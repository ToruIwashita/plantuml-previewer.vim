!function(e){function t(t){for(var n,o,l=t[0],s=t[1],h=t[2],u=0,c=[];u<l.length;u++)o=l[u],r[o]&&c.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(d&&d(t);c.length;)c.shift()();return a.push.apply(a,h||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],n=!0,l=1;l<i.length;l++){var s=i[l];0!==r[s]&&(n=!1)}n&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var n={},r={1:0},a=[];function o(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=n,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},o.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="./";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var h=0;h<l.length;h++)t(l[h]);var d=s;a.push([17,0]),i()}({13:function(e,t,i){},17:function(e,t,i){e.exports=i(5)},5:function(e,t,i){"use strict";i.r(t);var n=i(4),r=i(3),a=i(2),o=i.n(a),l=new Image,s={data:function(){return{img:{realWidth:null,realHeight:null,width:null,height:null,whRate:null},relativeCenter:{left:null,top:null},lastTimestamp:null,needReset:!0,diagramUrl:"../tmp.svg",url:null}},methods:{boxReset:function(){var e=this.$refs.wrapper;e.clientWidth/e.clientHeight>this.img.whRate?this.boxResize({height:e.clientHeight}):this.boxResize({width:e.clientWidth}),this.boxCenter()},boxResize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,i=void 0===t?null:t,n=e.height,r=void 0===n?null:n;this.$refs.box;i?(this.img.width=i,this.img.height=i/this.img.whRate):r&&(this.img.height=r,this.img.width=r*this.img.whRate)},boxCenter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.top,i=void 0===t?0:t,n=e.left,r=void 0===n?0:n,a=this.$refs.wrapper,o=this.$refs.box;this.relativeCenter.left=r,this.relativeCenter.top=i,r=a.clientWidth/2-r*this.img.width-this.img.width/2,i=a.clientHeight/2-i*this.img.height-this.img.height/2,o.style.left=r+"px",o.style.top=i+"px"},bindEvent:function(){var e=this,t=this.$refs.wrapper,i=this.$refs.box;new o.a(i).on("dragEnd",function(n){var r=i.style,a=r.top,o=r.left;a=parseFloat(a),o=parseFloat(o),e.relativeCenter.left=(t.clientWidth/2-(o+e.img.width/2))/e.img.width,e.relativeCenter.top=(t.clientHeight/2-(a+e.img.height/2))/e.img.height}),Object(r.addWheelListener)(t,function(t){t.preventDefault();var i=e.relativeCenter,n=i.top,r=i.left,a=e.img.width-2*t.deltaY;a>100&&(e.boxResize({width:a}),e.boxCenter({top:n,left:r}))}),l.addEventListener("error",function(t){console.error(t),e.needReset=!0}),l.addEventListener("load",function(){e.url=l.src,e.img.realWidth=l.width,e.img.realHeight=l.height;var t=l.width/l.height;e.img.whRate!==t&&(e.img.height=e.img.width/t,e.img.whRate=t),e.needReset&&(e.needReset=!1,e.boxReset())})},reloadImage:function(){l.src=this.diagramUrl+"?t="+Date.now()},reloadUpdateJs:function(){var e=document.getElementsByTagName("head")[0],t=document.createElement("script"),i=function(){setTimeout(function(){e.removeChild(t)},200)};t.type="text/javascript",t.addEventListener("error",i),t.addEventListener("load",i),t.src="../tmp.js?t="+Date.now(),e.appendChild(t)}},mounted:function(){var e=this;this.bindEvent(),this.reloadImage(),window.updateDiagramURL=function(t){t!==e.lastTimestamp&&(e.lastTimestamp=t,e.reloadImage())},setInterval(function(){e.reloadUpdateJs()},1e3)}},h=i(1);var d=function(e){i(13)},u=Object(h.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"wrapper",staticClass:"wrapper",on:{dblclick:e.boxReset}},[i("div",{ref:"box",staticClass:"box",style:{width:e.img.width+"px",height:e.img.height+"px"},attrs:{"data-center":"left: "+e.relativeCenter.left+", top: "+e.relativeCenter.top}},[i("img",{directives:[{name:"show",rawName:"v-show",value:e.url,expression:"url"}],attrs:{src:e.url},on:{load:function(){return e.$emit("loadedImage")}}})])])},[],!1,d,"data-v-64c5457e",null).exports;i(7);new n.a({el:"#app",render:function(e){return e(u)}})},7:function(e,t,i){}});
//# sourceMappingURL=main.9d784482.js.map